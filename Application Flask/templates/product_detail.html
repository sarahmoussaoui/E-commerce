<!-- Product Detail Page -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Détails du Produit</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
    <h1>{{ product.name }}</h1>
    <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image"/>
    <p>Prix: {{ product.price }} EUR</p>
    <p>Stock: {{ product.stock }}</p>

    <form onsubmit="addToCart(event)">
        <label for="quantity">Quantité:</label>
        <input type="number" id="quantity" name="quantity" min="1" max="{{ product.stock }}" value="1" required>
        <button type="submit">Ajouter au panier</button>
    </form>

    <a href="{{ url_for('index_user') }}" class="back-link">Retour aux produits</a>

    <script>
        function addToCart(event) {
            event.preventDefault(); // Prevent the default form submission
    
            // Get the quantity value
            const quantity = document.getElementById('quantity').value;
    
            // Get the product ID from the template variable
            const productId = "{{ product.id }}";
    
            // Construct the URL
            const url = "{{ url_for('add_to_cart', product_id=product.id, quantity=0) }}".replace("0", quantity);
    
            // Redirect to the constructed URL
            window.location.href = url;
        }
    </script>
</body>
</html>